{% extends "base.html" %}

{% block title %}Graphs & Plots{% endblock %}

{% block head_extra %}
<style>
</style>
{% endblock %}

{% block content %}
    <h1>Generate Plots</h1>

    {% if available_files %}
        <label for="log-select-plot">Select Log File:</label>
        <select id="log-select-plot">
            <option value="">-- Select a File --</option>
            {% for file_id, orig_name in available_files.items() %}
                <option value="{{ file_id }}">{{ orig_name }} (ID: {{ file_id }})</option>
            {% endfor %}
        </select>

        <div id="plot-options" style="margin-top: 15px; display: none;">
             <fieldset>
                 <legend>Select Plot Types (Apache Logs):</legend>
                 <div>
                     <input type="checkbox" id="plot-time" name="plot_type" value="events_over_time" checked>
                     <label for="plot-time">Events logged with time (Line)</label>
                 </div>
                 <div>
                     <input type="checkbox" id="plot-level" name="plot_type" value="level_distribution">
                     <label for="plot-level">Level State Distribution (Pie)</label>
                 </div>
                 <div>
                     <input type="checkbox" id="plot-eventcode" name="plot_type" value="event_code_distribution">
                     <label for="plot-eventcode">Event Code Distribution (Bar)</label>
                 </div>
                 
                 <button class="green-btn" id="generate-plots-btn" style="margin-top: 10px;">Generate Plots</button>
             </fieldset>
        </div>

        <div id="plots-display-container" style="margin-top: 20px;">
            <p id="plot-loading-message" style="display: none;">Generating plots...</p>
            <p id="plot-error-message" style="color: red; display: none;"></p>
            <div id="plots-display-area" style="display: none;"></div>
        </div>

    {% else %}
        <p>No processed log files available. Please <a href="{{ url_for('upload_page') }}">upload</a> some files first.</p>
    {% endif %}
{% endblock %}

{% block scripts_extra %}
     <script src="{{ url_for('static', filename='js/plots.js') }}"></script> {# Placeholder #}
{% endblock %}